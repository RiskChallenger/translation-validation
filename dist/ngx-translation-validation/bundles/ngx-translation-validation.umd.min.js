!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/forms"),require("rxjs"),require("rxjs/operators"),require("@angular/common"),require("@ngneat/transloco")):"function"==typeof define&&define.amd?define("ngx-translation-validation",["exports","@angular/core","@angular/forms","rxjs","rxjs/operators","@angular/common","@ngneat/transloco"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["ngx-translation-validation"]={},t.ng.core,t.ng.forms,t.rxjs,t.rxjs.operators,t.ng.common,t.transloco)}(this,(function(t,e,o,r,n,i,s){"use strict";var a=function(t){this.vcr=t};a.decorators=[{type:e.Directive,args:[{selector:"[ngxTvContainer]"}]}],a.ctorParameters=function(){return[{type:e.ViewContainerRef}]};var c=function(){function t(t,e){this.host=t,this.hostFormGroup=e,this.submit$=this.hostFormGroup.ngSubmit}return Object.defineProperty(t.prototype,"onBlur",{get:function(){return"blur"===this.hostFormGroup.form.updateOn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onSubmit",{get:function(){return"submit"===this.hostFormGroup.form.updateOn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.host.nativeElement},enumerable:!1,configurable:!0}),t}();c.decorators=[{type:e.Directive,args:[{selector:"[formGroup]"}]}],c.ctorParameters=function(){return[{type:e.ElementRef},{type:o.FormGroupDirective}]};var l=function(){function t(){}return Object.defineProperty(t.prototype,"ngxTvScope",{set:function(t){this._scope=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scope",{get:function(){return this._scope},enumerable:!1,configurable:!0}),t}();l.decorators=[{type:e.Directive,args:[{selector:"[ngxTvScope]"}]}],l.propDecorators={ngxTvScope:[{type:e.Input}]};var u=new e.InjectionToken("NGX_TV_CONFIG"),p=function(){function t(t,e,o,r,n,i,s,a){this.host=t,this.vcr=e,this.resolver=o,this.controlDir=r,this.config=n,this.controlErrorContainer=i,this.controlErrorContext=s,this.form=a}return Object.defineProperty(t.prototype,"element",{get:function(){return this.host.nativeElement},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){var t,e,o,i,s,a,c,l=this;this.submit$=null!==(e=null===(t=this.form)||void 0===t?void 0:t.submit$.pipe(n.tap((function(){l.addSubmittedClass()}))))&&void 0!==e?e:r.EMPTY,this.blur$=(null===(o=this.form)||void 0===o?void 0:o.onSubmit)?r.EMPTY:r.fromEvent(this.element,"blur").pipe(n.shareReplay(1)),this.container=null!==(s=null===(i=this.controlErrorContainer)||void 0===i?void 0:i.vcr)&&void 0!==s?s:this.vcr,this.context=null!==(c=null===(a=this.controlErrorContext)||void 0===a?void 0:a.scope)&&void 0!==c?c:"general",this.statusChangesObservable=r.merge(this.submit$,this.blur$,this.controlDir.statusChanges||r.EMPTY).subscribe((function(){var t=l.controlDir.errors;if(t){var e=Object.keys(t)[0];l.setError(l.config.scope+"."+l.context+"."+l.controlDir.name+"."+e)}else l.ref&&l.setError(null)}))},t.prototype.ngOnDestroy=function(){this.statusChangesObservable.unsubscribe()},t.prototype.addSubmittedClass=function(){var t;this.config.submittedClass&&(null===(t=this.form)||void 0===t||t.element.classList.add(this.config.submittedClass))},t.prototype.addInvalidClass=function(){this.config.invalidClass&&this.host.nativeElement.classList.add(this.config.invalidClass)},t.prototype.removeInvalidClass=function(){this.config.invalidClass&&this.host.nativeElement.classList.remove(this.config.invalidClass)},t.prototype.setError=function(t){if(!this.ref&&t){var e=this.resolver.resolveComponentFactory(this.config.errorsComponent);this.ref=this.container.createComponent(e),this.addInvalidClass()}this.ref&&(this.ref.instance.text=t),this.ref&&null===t&&(this.ref.destroy(),this.removeInvalidClass(),this.ref=void 0)},t}();p.decorators=[{type:e.Directive,args:[{selector:"[formControl], [formControlName]"}]}],p.ctorParameters=function(){return[{type:e.ElementRef},{type:e.ViewContainerRef},{type:e.ComponentFactoryResolver},{type:o.NgControl,decorators:[{type:e.Self}]},{type:void 0,decorators:[{type:e.Inject,args:[u]}]},{type:a,decorators:[{type:e.Optional}]},{type:l,decorators:[{type:e.Optional}]},{type:c,decorators:[{type:e.Optional},{type:e.Host}]}]};var f=function(){function t(t){this.cdr=t,this.componentHide=!0}return Object.defineProperty(t.prototype,"text",{set:function(t){t!==this.componentText&&(this.componentHide=!t,this.componentText=t||"",this.cdr.detectChanges())},enumerable:!1,configurable:!0}),t}();function d(t){return Object.assign({scope:"validation",submittedClass:"ng-submitted",errorsComponent:f,invalidClass:void 0},t)}f.decorators=[{type:e.Component,args:[{selector:"ngx-tv-container",template:'<ng-container *transloco="let t">\n  <p class="input-errors" [class.hide]="componentHide">\n    {{ t(componentText) }}\n  </p>\n</ng-container>\n',changeDetection:e.ChangeDetectionStrategy.OnPush,styles:["form.submitted input.ng-invalid,input.ng-dirty.ng-invalid{border:1px solid red}"]}]}],f.ctorParameters=function(){return[{type:e.ChangeDetectorRef}]},f.propDecorators={text:[{type:e.Input}]};var m=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:u,useValue:d(e)},{provide:s.TRANSLOCO_SCOPE,useValue:d(e).scope}]}},t.forChild=function(){return{ngModule:t}},t}();m.decorators=[{type:e.NgModule,args:[{declarations:[p,c,f,a,l],imports:[i.CommonModule,s.TranslocoModule],exports:[p,c,f,a,l]}]}],t.NGX_TV_CONFIG=u,t.NgxTvContainerComponent=f,t.NgxTvContainerDirective=a,t.NgxTvDirective=p,t.NgxTvFormDirective=c,t.NgxTvModule=m,t.NgxTvScopeDirective=l,t.getConfig=d,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-translation-validation.umd.min.js.map